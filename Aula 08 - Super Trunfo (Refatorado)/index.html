<html>

<head>
    <link rel="stylesheet" href="style.css">
    <title>
        Imersão Dev - Aula 08
    </title>
</head>

<body>
    <div class="container">
        <img src="https://www.alura.com.br/assets/img/imersoes/dev-2021/logo-imersao-super-trunfo.png" class="page-logo"
            alt="">
        <h1 class="page-title">Super Trunfo</h1>
        <button onclick="sortearCarta()" id="btnSortear">Sortear carta</button>
        <form id="form">
            <h2>Escolha o seu atributo</h2>
            <div class="wrapper">
                <div>
                    <div id="carta-jogador">
                        <img src="https://www.alura.com.br/assets/img/imersoes/dev-2021/card-super-trunfo-transparent-ajustado.png"
                            style=" width: inherit; height: inherit; position: absolute;">
                        <h3></h3>
                    </div>
                </div>
                <div>
                    <div id="carta-maquina" class="carta"><img
                            src="https://www.alura.com.br/assets/img/imersoes/dev-2021/card-super-trunfo-transparent-ajustado.png"
                            style=" width: inherit; height: inherit; position: absolute;"></div>
                </div>
            </div>
            <button class="button-jogar" type="button" id="btnJogar" onclick="jogar()" disabled="false">Jogar</button>
            <div id="resultado"></div>
        </form>
    </div>
    <script>
        var cartaPaulo = {
      nome: "Seiya de Pegaso",
      imagem: "https://i.pinimg.com/236x/12/a9/4c/12a94cb3fa0cd1666d576eaff3505177.jpg",
      atributos: {
          ataque: 80,
          defesa: 60,
          magia: 90
      }
  }

  var cartaRafa = {
      nome: "Bulbasauro",
      imagem: "https://i.pinimg.com/originals/3b/78/47/3b7847675982776e5219e12a680ecd84.png",
      atributos: {
          ataque: 70,
          defesa: 65,
          magia: 85
      }
  }

  var cartaGui = {
      nome: "Lorde Darth Vader",
      imagem: "https://images-na.ssl-images-amazon.com/images/I/51VJBqMZVAL._SX328_BO1,204,203,200_.jpg",
      atributos: {
          ataque: 88,
          defesa: 62,
          magia: 90
      }
  }


  var cartaMaquina
  var cartaJogador
  var cartas = [cartaPaulo, cartaRafa, cartaGui]
  // 0          1           2

  function sortearCarta() {
      var numeroCartaMaquina = parseInt(Math.random() * 3)
      cartaMaquina = cartas[numeroCartaMaquina]

      var numeroCartaJogador = parseInt(Math.random() * 3)
      while (numeroCartaJogador == numeroCartaMaquina) {
          numeroCartaJogador = parseInt(Math.random() * 3)
      }
      cartaJogador = cartas[numeroCartaJogador]
      console.log(cartaJogador)

      document.getElementById('btnSortear').disabled = true
      document.getElementById('btnJogar').disabled = false

      exibeCartaJogador()
  }
  function exibeCartaJogador(){
    var divCartaJogador = document.getElementById("carta-jogador")
    var moldura = '<img src="https://www.alura.com.br/assets/img/imersoes/dev-2021/card-super-trunfo-transparent.png" style=" width: inherit; height: inherit; position: absolute;">';

    divCartaJogador.style.backgroundImage=`url(${cartaJogador.imagem})`
    var nome = `<p class="carta-subtitle">${cartaJogador.nome}</p>`
    var opcoesTexto = ""

    for (var atributo in cartaJogador.atributos) {
          opcoesTexto += "<input type='radio' name='atributo' value='" + atributo + "'>" + atributo + " " + cartaJogador.atributos[atributo] + "<br>"
      }
      var html = "<div id='opcoes' class='carta-status'>"

    divCartaJogador.innerHTML = moldura+nome+html+opcoesTexto+'</div>'
  }

  function obtemAtributoSelecionado() {
      var radioAtributo = document.getElementsByName('atributo')
      for (var i = 0; i < radioAtributo.length; i++) {
          if (radioAtributo[i].checked) {
              return radioAtributo[i].value
          }
      }
  }

  function jogar() {
      var atributoSelecionado = obtemAtributoSelecionado()

      if (cartaJogador.atributos[atributoSelecionado] > cartaMaquina.atributos[atributoSelecionado]) {
          alert('Venceu a carta máquina')
      } else if (cartaJogador.atributos[atributoSelecionado] < cartaMaquina.atributos[atributoSelecionado]) {
          alert('Perdeu. Carta da máquina é maior')
      } else {
          alert('Empatou!')
      }
      console.log(cartaMaquina)
  }
    </script>
</body>

</html>